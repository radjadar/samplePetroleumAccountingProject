<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<view xmlns="http://jmix.io/schema/flowui/view"
      title="msg://partnerDetailView.title"
      focusComponent="form">
    <data>
        <instance id="partnerDc"
                  class="com.company.samplepetroleumaccountingproject.entity.Partner">
            <fetchPlan extends="_base">
                <property name="ceo" fetchPlan="_base"/>
                <property name="operatingAccount" fetchPlan="_base"/>
                <property name="contactPersons" fetchPlan="_base"/>
                <property name="operatingAccounts" fetchPlan="_base"/>
            </fetchPlan>
            <loader/>
            <instance id="ceoDc" property="ceo"/>
            <instance id="operatingAccountDc" property="operatingAccount"/>
            <collection id="contactPersonsDc" property="contactPersons"/>
            <collection id="operatingAccountsDc" property="operatingAccounts"/>
        </instance>
    </data>
    <facets>
        <dataLoadCoordinator auto="true"/>
    </facets>
    <actions>
        <action id="saveAction" type="detail_saveClose"/>
        <action id="closeAction" type="detail_close"/>
    </actions>
    <layout>
        <formLayout id="form" dataContainer="partnerDc">
            <textField id="shortNameField" property="shortName"/>
            <textField id="fullNameField" property="fullName"/>
            <textField id="innField" property="inn"/>
            <textField id="kppField" property="kpp"/>
            <textField id="legalAddressField" property="legalAddress"/>
            <textField id="physicalAddressField" property="physicalAddress"/>
            <entityComboBox id="ceoField" property="ceo" itemsContainer="contactPersonsDc">
                <actions>
                    <action id="entityOpenComposition" type="entity_openComposition" visible="false"/>
                    <action id="entityClear" type="entity_clear"/>
                </actions>
            </entityComboBox>
            <entityComboBox id="operatingAccountField" property="operatingAccount" itemsContainer="operatingAccountsDc">
                <actions>
                    <action id="entityOpenComposition" type="entity_openComposition" visible="false"/>
                    <action id="entityClear" type="entity_clear"/>
                </actions>
            </entityComboBox>
        </formLayout>
        <tabSheet width="100%">
            <tab id="contactPersons"
                 label="msg://com.company.samplepetroleumaccountingproject.entity/Partner.contactPersons">
                <vbox>
                    <hbox id="buttonsPanel" classNames="buttons-panel">
                        <button action="contactPersonsDataGrid.create"/>
                        <button action="contactPersonsDataGrid.edit"/>
                        <button action="contactPersonsDataGrid.remove"/>
                    </hbox>
                    <dataGrid id="contactPersonsDataGrid" dataContainer="contactPersonsDc" width="100%" minHeight="20em">
                        <actions>
                            <action id="create" type="list_create">
                                <properties>
                                    <property name="openMode" value="DIALOG"/>
                                </properties>
                            </action>
                            <action id="edit" type="list_edit">
                                <properties>
                                    <property name="openMode" value="DIALOG"/>
                                </properties>
                            </action>
                            <action id="remove" type="list_remove"/>
                        </actions>
                        <columns>
                            <column property="fullName"/>
                            <column property="role"/>
                            <column property="contacts"/>
                        </columns>
                    </dataGrid>
                </vbox>
            </tab>
            <tab id="operatingAccounts"
                 label="msg://com.company.samplepetroleumaccountingproject.entity/Partner.operatingAccounts">
                <vbox>
                    <hbox id="buttonsPanel" classNames="buttons-panel">
                        <button action="operatingAccountsDataGrid.create"/>
                        <button action="operatingAccountsDataGrid.edit"/>
                        <button action="operatingAccountsDataGrid.remove"/>
                    </hbox>
                    <dataGrid id="operatingAccountsDataGrid" dataContainer="operatingAccountsDc" width="100%" minHeight="20em">
                        <actions>
                            <action id="create" type="list_create">
                                <properties>
                                    <property name="openMode" value="DIALOG"/>
                                </properties>
                            </action>
                            <action id="edit" type="list_edit">
                                <properties>
                                    <property name="openMode" value="DIALOG"/>
                                </properties>
                            </action>
                            <action id="remove" type="list_remove"/>
                        </actions>
                        <columns>
                            <column property="accountNumber"/>
                            <column property="correspondentAccount"/>
                            <column property="bank"/>
                            <column property="bic"/>
                            <column property="inn"/>
                        </columns>
                    </dataGrid>
                </vbox>
            </tab>
        </tabSheet>
        <hbox id="detailActions">
            <button id="saveAndCloseBtn" action="saveAction"/>
            <button id="closeBtn" action="closeAction"/>
        </hbox>
    </layout>
</view>
